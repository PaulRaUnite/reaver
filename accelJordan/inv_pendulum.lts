var ang,angDer,pos,speed;
initial linit;

linit -> l:
      guard -1 <= ang and ang <= 1 assign { pos := 0; speed := 0; angDer := 0; };

l -> l:
      guard true assign {
	    ang := ang + 0.01*angDer;
	    angDer := 0.04*pos + 0.07*speed - 0.51*ang + 0.85*angDer;
      	    pos := pos + 0.01*speed;
	    speed := 0.02*pos+1.03*speed-0.3*ang-0.06*angDer;
      }
      jordan
      matrix(
      [1,1,1,1,0],
       [-5.24534007054674-1.42955496936398*%i,-5.24534007054674+1.42955496936398*%i,-0.75465992945327-0.19868732816258*%i,-0.75465992945327+0.19868732816258*%i,0],
       [0.1168815744184025+0.1612812543164538*%i,0.1168815744184025-0.1612812543164538*%i,-13.3668815744184+16.5842145633724*%i,-13.3668815744184-16.5842145633724*%i,0],
       [-0.382523187232095-1.013063661431047*%i,-0.382523187232095+1.013063661431047*%i,13.3825231872321-9.8596122065456*%i,13.3825231872321+9.8596122065456*%i,0],
       [0,0,0,0,1])
      [[0.9475465992945326-0.01429554969363981*%i,1],
       [0.9475465992945326+0.01429554969363981*%i,1],
       [0.9924534007054673-0.001986873281625776*%i,1],
       [0.9924534007054673+0.001986873281625776*%i,1],
       [1,1]]
      matrix(
      [1.01491177758016 + 3.39802231731947*%i, 0.108250032609232 + 0.678491090213286*%i, -0.0988764790092290 - 0.295638082145493*%i, -0.168495131259785 - 0.510946360137462*%i, 0],
       [1.01491177758016 - 3.39802231731948*%i,   0.108250032609231 - 0.678491090213286*%i, -0.0988764790092288 + 0.295638082145493*%i, -0.168495131259785 + 0.510946360137462*%i, 0],
       [-0.514911777580157 + 0.389126172509052*%i, -0.108250032609231 + 0.0814141605154221*%i,  0.0988764790092289 - 0.107665402929770*%i, 0.168495131259785 - 0.132025690057309*%i, 0],
       [-0.514911777580157 - 0.389126172509052*%i, -0.108250032609232 - 0.0814141605154220*%i,  0.0988764790092289 + 0.107665402929769*%i, 0.168495131259785 + 0.132025690057309*%i, 0],
       [0,0,0,0,1])

       /*
	 m = matrix(QQ, [[1,1/100,0,0,0],[-51/100,85/100,4/100,7/100,0],[0,0,1,1/100,0],[-3/10,-6/100,2/100,103/100,0],[0,0,0,0,1]]);m
	j,s=m.jordan_form(base_ring=QQbar,subdivide=True,transformation=True);j;s;
	_,ss=m.is_similar(j,transformation=True);
	_,ss=m.is_similar(j,transformation=True);
	ss=s.inverse();
	ss*m*s==j;j

	s=matrix([[1,1,1,1,0],
       [-5.24534007054674-1.42955496936398*I,-5.24534007054674+1.42955496936398*I,-0.75465992945327-0.19868732816258*I,-0.75465992945327+0.19868732816258*I,0],
       [0.1168815744184025+0.1612812543164538*I,0.1168815744184025-0.1612812543164538*I,-13.3668815744184+16.5842145633724*I,-13.3668815744184-16.5842145633724*I,0],
       [-0.382523187232095-1.013063661431047*I,-0.382523187232095+1.013063661431047*I,13.3825231872321-9.8596122065456*I,13.3825231872321+9.8596122065456*I,0],
       [0,0,0,0,1]]);

       ss=matrix(     [[1.01491177758016 + 3.39802231731947*I, 0.108250032609232 + 0.678491090213286*I, -0.0988764790092290 - 0.295638082145493*I, -0.168495131259785 - 0.510946360137462*I, 0],
       [1.01491177758016 - 3.39802231731948*I,   0.108250032609231 - 0.678491090213286*I, -0.0988764790092288 + 0.295638082145493*I, -0.168495131259785 + 0.510946360137462*I, 0],
       [-0.514911777580157 + 0.389126172509052*I, -0.108250032609231 + 0.0814141605154221*I,  0.0988764790092289 - 0.107665402929770*I, 0.168495131259785 - 0.132025690057309*I, 0],
       [-0.514911777580157 - 0.389126172509052*I, -0.108250032609232 - 0.0814141605154220*I,  0.0988764790092289 + 0.107665402929769*I, 0.168495131259785 + 0.132025690057309*I, 0],
       [0,0,0,0,1]]);;
      */
;
l -> lerror1: guard pos<=-10 assign{};
l -> lerror2: guard pos>=10 assign{};
l -> lerror3: guard ang<=-20 assign{};
l -> lerror4: guard ang>=20 assign{};
